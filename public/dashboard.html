<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard - Bright Networks</title>
    <link rel="icon" type="image/svg+xml" href="/favicon.svg">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        body { background-color: #f8f9fa; word-break: keep-all; overflow-wrap: break-word; transition: all 0.3s ease; }
        .sidebar { height: 100vh; background: #2c3e50; color: white; padding-top: 20px; position: fixed; width: 250px; display: flex; flex-direction: column; transition: all 0.3s ease; z-index: 1000; overflow: hidden; box-shadow: 4px 0 10px rgba(0,0,0,0.1); }
        .sidebar.collapsed { width: 70px; }
        .sidebar .nav-link { color: rgba(255,255,255,0.7); padding: 15px 22px; font-size: 1rem; display: flex; align-items: center; white-space: nowrap; transition: all 0.2s; border-left: 4px solid transparent; }
        .sidebar .nav-link i { min-width: 25px; font-size: 1.2rem; margin-right: 15px; text-align: center; }
        .sidebar.collapsed .nav-link span { display: none; }
        .sidebar.collapsed .nav-link i { margin-right: 0; }
        .sidebar.collapsed .logo span, .sidebar.collapsed .logo br { display: none; }
        .sidebar.collapsed .logo { text-align: center; padding: 0 0 30px; }
        .sidebar.collapsed .logo i { margin-right: 0; font-size: 1.8rem; }
        .sidebar .nav-link:hover, .sidebar .nav-link.active { color: white; background: rgba(255,255,255,0.1); border-left-color: #3498db; }
        
        .sidebar .logo { font-size: 1.5rem; font-weight: bold; padding: 0 20px 30px; flex-shrink: 0; transition: all 0.3s; line-height: 1.2; }
        
        .toggle-btn { position: absolute; top: 20px; right: 15px; background: rgba(255,255,255,0.1); color: white; border: none; width: 32px; height: 32px; border-radius: 8px; cursor: pointer; z-index: 1001; display: flex; align-items: center; justify-content: center; transition: all 0.2s; }
        .toggle-btn:hover { background: rgba(255,255,255,0.2); }
        .sidebar.collapsed .toggle-btn { right: 19px; top: 75px; }

        .main-content { margin-left: 250px; padding: 30px; transition: all 0.3s ease; }
        .main-content.expanded { margin-left: 70px; }
        
        /* User info in sidebar */
        .user-section { margin-top: auto; padding: 20px 10px; border-top: 1px solid rgba(255,255,255,0.1); transition: all 0.3s; }
        .user-info-wrapper { display: flex; align-items: center; padding: 5px 10px; margin-bottom: 15px; overflow: hidden; }
        .sidebar.collapsed .user-info-wrapper span { display: none; }
        .sidebar.collapsed .user-info-wrapper img { margin-right: 0 !important; }

        .card { border: none; border-radius: 12px; box-shadow: 0 2px 10px rgba(0,0,0,0.05); margin-bottom: 20px; }
        .step-number { background: #3498db; color: white; width: 30px; height: 30px; border-radius: 50%; display: inline-flex; align-items: center; justify-content: center; margin-right: 10px; font-weight: bold; }
        .code-block { background: #1e1e1e !important; border-radius: 8px; position: relative; overflow: hidden; border: 1px solid #333; }
        .code-block pre { padding: 20px; margin: 0; font-size: 0.9rem; line-height: 1.5; overflow-x: auto; color: #d4d4d4; }
        .code-block code { font-family: 'Fira Code', 'Consolas', monospace !important; background: transparent !important; padding: 0 !important; color: #4ec9b0 !important; }
        .copy-btn { position: absolute; top: 12px; right: 12px; background: rgba(255,255,255,0.1); color: #fff; border: 1px solid rgba(255,255,255,0.2); padding: 4px 10px; border-radius: 4px; font-size: 0.75rem; cursor: pointer; z-index: 10; transition: all 0.2s; }
        .copy-btn:hover { background: rgba(255,255,255,0.15); color: white; border-color: rgba(255,255,255,0.3); }
        .score-container { position: relative; height: 200px; width: 200px; margin: 0 auto; }
        .score-text { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); font-size: 2.5rem; font-weight: bold; color: #2ecc71; }
        .loader { display: none; text-align: center; padding: 40px; }
        .hidden { display: none; }
        .advice-card { border-left: 4px solid #3498db; padding-left: 15px; margin-bottom: 15px; }
        .advice-title { font-weight: bold; color: #2c3e50; margin-bottom: 5px; }
        .advice-text { font-size: 0.95rem; color: #555; }

        /* New Styles */
        .metric-card { border: none; border-radius: 15px; transition: transform 0.2s; }
        .metric-card:hover { transform: translateY(-5px); }
        .metric-value { font-size: 1.8rem; font-weight: 800; color: #2c3e50; }
        .metric-label { font-size: 0.85rem; color: #7f8c8d; text-transform: uppercase; letter-spacing: 1px; }
        
        .timeline { position: relative; padding-left: 30px; }
        .timeline-item { position: relative; padding-bottom: 20px; }
        .timeline-item::before { content: ""; position: absolute; left: -21px; top: 5px; width: 12px; height: 12px; border-radius: 50%; background: #3498db; }
        .timeline-item::after { content: ""; position: absolute; left: -16px; top: 20px; width: 2px; height: 100%; background: #e9ecef; }
        .timeline-item:last-child::after { display: none; }
        
        .pricing-card { border: 2px solid #f1f3f5; border-radius: 20px; transition: all 0.3s; position: relative; }
        .pricing-card.featured { border-color: #3498db; }
        .recommended-badge { position: absolute; top: -12px; left: 50%; transform: translateX(-50%); background: #3498db; color: white; padding: 2px 15px; border-radius: 20px; font-size: 0.7rem; font-weight: bold; z-index: 10; }
        .price-text { font-size: 1.75rem; font-weight: bold; }
        
        .switch { position: relative; display: inline-block; width: 50px; height: 26px; }
        .switch input { opacity: 0; width: 0; height: 0; }
        .slider { position: absolute; cursor: pointer; top: 0; left: 0; right: 0; bottom: 0; background-color: #dee2e6; transition: .4s; border-radius: 24px; box-shadow: inset 0 2px 4px rgba(0,0,0,0.05); }
        .slider:before { position: absolute; content: ""; height: 18px; width: 18px; left: 5px; bottom: 4px; background-color: white; transition: .4s; border-radius: 50%; box-shadow: 0 2px 5px rgba(0,0,0,0.2); }
        input:checked + .slider { background-color: #3498db; }
        input:checked + .slider:before { transform: translateX(17px); }

        .preview-box { background: #fff; border: 1px dashed #dee2e6; border-radius: 10px; padding: 20px; position: relative; }
        .social-proof-toast { position: absolute; bottom: 20px; left: 20px; background: white; border-radius: 50px; padding: 10px 20px; box-shadow: 0 5px 15px rgba(0,0,0,0.1); display: flex; align-items: center; font-size: 0.85rem; border: 1px solid #eee; }
    </style>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/atom-one-dark.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
</head>
<body>

    <!-- Sidebar -->
    <div class="sidebar" id="sidebar">
        <button class="toggle-btn" onclick="toggleSidebar()"><i class="fas fa-bars"></i></button>
        <div class="logo">
            Bright<br>
            <span>Networks</span>
        </div>
        <nav class="nav flex-column flex-grow-1" id="mainNav">
            <a class="nav-link" href="/dashboard"><i class="fas fa-tachometer-alt"></i> <span>ëŒ€ì‹œë³´ë“œ</span></a>
            <a class="nav-link" href="/automation"><i class="fas fa-robot"></i> <span>ìë™í™” ì„¤ì •</span></a>
            <a class="nav-link" href="/reports"><i class="fas fa-chart-line"></i> <span>ë¶„ì„ ë¦¬í¬íŠ¸</span></a>
            <a class="nav-link" href="/organizations"><i class="fas fa-building"></i> <span>ë‚´ ì¡°ì§</span></a>
            <a class="nav-link" href="/subscription"><i class="fas fa-credit-card"></i> <span>ìš”ê¸ˆì œ ê´€ë¦¬</span></a>
            
            <div class="user-section">
                <div class="user-info-wrapper">
                    <img id="userAvatar" src="" class="rounded-circle me-2" width="30">
                    <span id="userName" class="small">Loading...</span>
                </div>
                <a href="/api/auth/logout" class="btn btn-outline-light btn-sm w-100 mt-2">
                    <i class="fas fa-sign-out-alt"></i> <span>ë¡œê·¸ì•„ì›ƒ</span>
                </a>
            </div>
        </nav>
    </div>

    <!-- Main Content -->
    <div class="main-content" id="mainContent">
        <h2 class="mb-4">ë°˜ê°‘ìŠµë‹ˆë‹¤, <span id="welcomeName">íšŒì›</span>ë‹˜! ğŸ‘‹</h2>
        
        <!-- Section: Dashboard (Overview) -->
        <div id="sectionDashboard" class="content-section hidden">
            <div class="row g-4 mb-4">
                <div class="col-md-3">
                    <div class="card metric-card bg-white shadow-sm">
                        <div class="card-body">
                            <div class="metric-label">ë°©ì–´ëœ ì ì¬ ë§¤ì¶œ</div>
                            <div class="metric-value">â‚©<span id="statRecovered">1,240,000</span></div>
                            <div class="text-success small"><i class="fas fa-arrow-up"></i> 12% vs ì§€ë‚œì£¼</div>
                        </div>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="card metric-card bg-white shadow-sm">
                        <div class="card-body">
                            <div class="metric-label">ì˜¤ëŠ˜ì˜ ì´íƒˆ ë°©ì§€</div>
                            <div class="metric-value"><span id="statPrevention">42</span>íšŒ</div>
                            <div class="text-primary small">AI íŒì—… í™œì„± ì¤‘</div>
                        </div>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="card metric-card bg-white shadow-sm">
                        <div class="card-body">
                            <div class="metric-label">í˜„ì¬ ì ‘ì†ì ìˆ˜</div>
                            <div class="metric-value"><span id="statVisitors">128</span>ëª…</div>
                            <div class="text-muted small">ì‹¤ì‹œê°„ íŠ¸ë˜í”½</div>
                        </div>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="card metric-card bg-white shadow-sm">
                        <div class="card-body">
                            <div class="metric-label">SEO ì ìˆ˜</div>
                            <div class="metric-value"><span id="statSeo">88</span>/100</div>
                            <div class="progress mt-2" style="height: 6px;">
                                <div class="progress-bar bg-success" style="width: 88%"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-md-8">
                    <div class="card">
                        <div class="card-body">
                            <h5 class="card-title fw-bold mb-4">ë§¤ì¶œ ë°©ì–´ ì¶”ì´</h5>
                            <div style="height: 300px; position: relative;">
                                <canvas id="revenueChart"></canvas>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="card h-100">
                        <div class="card-body">
                            <h5 class="card-title fw-bold mb-4">ì‹¤ì‹œê°„ ì´ë²¤íŠ¸ ë¡œê·¸</h5>
                            <div class="timeline" id="eventLog">
                                <div class="timeline-item">
                                    <div class="fw-bold small text-muted">14:20:05</div>
                                    <div class="small">ì¥ë°”êµ¬ë‹ˆ ì´íƒˆ ê°ì§€ -> <strong>10% í• ì¸ ì¿ í°</strong> ë°œí–‰</div>
                                </div>
                                <div class="timeline-item">
                                    <div class="fw-bold small text-muted">14:15:30</div>
                                    <div class="small">ì„œìš¸ì‹œ ì„œì´ˆêµ¬ ê³ ê°ë‹˜ì´ <strong>ë¦°ë„¨ ì…”ì¸ </strong>ë¥¼ êµ¬ë§¤í–ˆìŠµë‹ˆë‹¤. (Social Proof)</div>
                                </div>
                                <div class="timeline-item">
                                    <div class="fw-bold small text-muted">13:58:12</div>
                                    <div class="small">ê²°ì œ í˜ì´ì§€ ì´íƒˆ ë°©ì§€ íŒì—… ë…¸ì¶œ</div>
                                </div>
                                <div class="timeline-item">
                                    <div class="fw-bold small text-muted">13:45:00</div>
                                    <div class="small">AIO ê²€ìƒ‰ ìµœì í™” ë°ì´í„° ì—…ë°ì´íŠ¸ ì™„ë£Œ</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="card mt-4">
                <div class="card-body">
                    <div class="d-flex justify-content-between align-items-center mb-3">
                        <div>
                            <h5 class="card-title fw-bold">ì‚¬ì´íŠ¸ ìµœì í™” ë‚´ì—­</h5>
                            <p class="text-muted mb-0">AIê°€ ë¶„ì„í•œ ìµœê·¼ ìŠ¤ìº” ê²°ê³¼ì…ë‹ˆë‹¤.</p>
                        </div>
                        <button class="btn btn-outline-primary btn-sm" onclick="batchRunAll()">
                            <i class="fas fa-redo me-1"></i> ì¬ë¶„ì„
                        </button>
                    </div>
                    <div class="table-responsive">
                        <table class="table table-hover align-middle">
                            <thead class="table-light">
                                <tr>
                                    <th>ì‚¬ì´íŠ¸ URL</th>
                                    <th>ìƒíƒœ</th>
                                    <th>SEO ì ìˆ˜</th>
                                    <th>ë§ˆì§€ë§‰ ìŠ¤ìº”</th>
                                    <th>ì•¡ì…˜</th>
                                </tr>
                            </thead>
                            <tbody id="siteHistoryList">
                                <tr><td colspan="5" class="text-center py-4">ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</td></tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>

        <!-- Section: Automation Control -->
        <div id="sectionAutomation" class="content-section hidden">
            <div class="row">
                <!-- 1. Social Proof -->
                <div class="col-md-6">
                    <div class="card mb-4 h-100">
                        <div class="card-body">
                            <div class="d-flex justify-content-between align-items-start mb-4">
                                <div>
                                    <h5 class="card-title fw-bold mb-1"><i class="fas fa-users text-primary me-2"></i> ì‹¤ì‹œê°„ êµ¬ë§¤ ì•Œë¦¼</h5>
                                    <p class="text-muted small">ë‹¤ë¥¸ ê³ ê°ì˜ êµ¬ë§¤ ì†Œì‹ì„ ì‹¤ì‹œê°„ìœ¼ë¡œ ì•Œë ¤ ì‹ ë¢°ë„ë¥¼ ë†’ì…ë‹ˆë‹¤.</p>
                                </div>
                                <label class="switch">
                                    <input type="checkbox" checked id="toggleSocialProof">
                                    <span class="slider"></span>
                                </label>
                            </div>
                            
                            <div class="mb-3">
                                <label class="form-label small fw-bold">ì•Œë¦¼ ë¬¸êµ¬ í…œí”Œë¦¿</label>
                                <input type="text" class="form-control" id="socialProofText" value="{location} {customer}ë‹˜ì´ {product}ë¥¼ ë°©ê¸ˆ êµ¬ë§¤í–ˆìŠµë‹ˆë‹¤!">
                                <div class="form-text">ì‚¬ìš© ê°€ëŠ¥í•œ íƒœê·¸: {location}, {customer}, {product}, {time}</div>
                            </div>

                            <div class="preview-box mt-auto" style="height: 100px; background-color: #f8f9fa;">
                                <div class="social-proof-toast" style="bottom: 10px; left: 10px;">
                                    <div style="width: 10px; height: 10px; background: #2ecc71; border-radius: 50%; margin-right: 12px;"></div>
                                    <span><strong>ì„œìš¸ì‹œ</strong> <strong>ê¹€*ì—°</strong>ë‹˜ì´ <strong>ë¦°ë„¨ ì…”ì¸ </strong>ë¥¼ ë°©ê¸ˆ êµ¬ë§¤í–ˆìŠµë‹ˆë‹¤!</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 2. Exit Intent -->
                <div class="col-md-6">
                    <div class="card mb-4 h-100">
                        <div class="card-body">
                            <div class="d-flex justify-content-between align-items-start mb-4">
                                <div>
                                    <h5 class="card-title fw-bold mb-1"><i class="fas fa-door-open text-danger me-2"></i> ì´íƒˆ ë°©ì§€ AI íŒì—…</h5>
                                    <p class="text-muted small">ê³ ê°ì´ ë‚˜ê°€ë ¤ëŠ” ìˆœê°„(Mouse Leave)ì„ í¬ì°©í•´ ë¶™ì¡ìŠµë‹ˆë‹¤.</p>
                                </div>
                                <label class="switch">
                                    <input type="checkbox" checked id="toggleExitIntent">
                                    <span class="slider"></span>
                                </label>
                            </div>

                            <div class="mb-3">
                                <label class="form-label small fw-bold">ì´íƒˆ ë°©ì§€ ë¬¸êµ¬</label>
                                <textarea class="form-control" id="exitIntentEditor" rows="3">ì ì‹œë§Œìš”! ğŸƒâ€â™‚ï¸ ì§€ê¸ˆ ë‚˜ê°€ì‹œê¸°ì—” ë„ˆë¬´ ì•„ì‰¬ìš´ í˜œíƒì´ ìˆì–´ìš”.</textarea>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 3. Tab Recovery (New) -->
                <div class="col-md-6">
                    <div class="card mb-4 h-100">
                        <div class="card-body">
                            <div class="d-flex justify-content-between align-items-start mb-4">
                                <div>
                                    <h5 class="card-title fw-bold mb-1"><i class="fas fa-exchange-alt text-warning me-2"></i> íƒ­ ë³µêµ¬ (Tab Recovery)</h5>
                                    <p class="text-muted small">ê³ ê°ì´ ë‹¤ë¥¸ íƒ­ìœ¼ë¡œ ì´ë™í•˜ë©´ ì œëª©ì„ ê¹œë¹¡ì—¬ ë‹¤ì‹œ ë¶€ë¦…ë‹ˆë‹¤.</p>
                                </div>
                                <label class="switch">
                                    <input type="checkbox" checked id="toggleTabRecovery">
                                    <span class="slider"></span>
                                </label>
                            </div>

                            <div class="mb-3">
                                <label class="form-label small fw-bold">ê¹œë¹¡ì„ ë¬¸êµ¬</label>
                                <input type="text" class="form-control" id="tabRecoveryText" value="ğŸ ë†“ì¹˜ì§€ ë§ˆì„¸ìš”!">
                                <div class="form-text">ì›ë˜ ì œëª©ê³¼ ì´ ë¬¸êµ¬ê°€ ë²ˆê°ˆì•„ê°€ë©° í‘œì‹œë©ë‹ˆë‹¤.</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 4. Price Match (New) -->
                <div class="col-md-6">
                    <div class="card mb-4 h-100">
                        <div class="card-body">
                            <div class="d-flex justify-content-between align-items-start mb-4">
                                <div>
                                    <h5 class="card-title fw-bold mb-1"><i class="fas fa-tags text-success me-2"></i> ê°€ê²© ë¹„êµ ë°©ì–´</h5>
                                    <p class="text-muted small">ìƒí’ˆëª…ì„ ë³µì‚¬(Ctrl+C)í•˜ë©´ ì¦‰ì‹œ í• ì¸ í˜œíƒì„ ì œì•ˆí•©ë‹ˆë‹¤.</p>
                                </div>
                                <label class="switch">
                                    <input type="checkbox" checked id="togglePriceMatch">
                                    <span class="slider"></span>
                                </label>
                            </div>

                            <div class="mb-3">
                                <label class="form-label small fw-bold">ì œì•ˆ ë¬¸êµ¬</label>
                                <input type="text" class="form-control" id="priceMatchText" value="ğŸ” ìµœì €ê°€ë¥¼ ì°¾ê³  ê³„ì‹ ê°€ìš”? ì—¬ê¸°ì„œ 5% í• ì¸ë°›ìœ¼ì„¸ìš”: SAVE5">
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="text-end mt-3">
                <button class="btn btn-primary px-4" onclick="saveAutomation()">
                    <i class="fas fa-save me-2"></i> ëª¨ë“  ì„¤ì • ì €ì¥
                </button>
            </div>
        </div>

        <!-- Section: Subscription -->
        <div id="sectionSubscription" class="content-section hidden">
            <div class="text-center mb-5">
                <h2 class="fw-bold">í•©ë¦¬ì ì¸ ìš”ê¸ˆì œë¡œ ë¹„ì¦ˆë‹ˆìŠ¤ë¥¼ í‚¤ìš°ì„¸ìš”</h2>
                <p class="text-muted">í˜„ì¬ í”Œëœ: <span class="badge bg-primary">Free</span></p>
            </div>

            <div class="row g-3 justify-content-center mb-5">
                <!-- Free Plan -->
                <div class="col-xl-3 col-md-4">
                    <div class="card pricing-card h-100 p-3">
                        <div class="card-body text-center p-2 d-flex flex-column">
                            <h5 class="fw-bold">Free</h5>
                            <div class="price-text my-3">â‚©0<span class="fs-6 text-muted">/ì›”</span></div>
                            <ul class="list-unstyled text-start mb-4 small flex-grow-1">
                                <li class="mb-2"><i class="fas fa-check text-success me-2"></i> ê¸°ì´ˆ SEO ì§„ë‹¨ (ì›” 1íšŒ)</li>
                                <li class="mb-2"><i class="fas fa-check text-success me-2"></i> ì£¼ìš” ê²€ìƒ‰ ì—”ì§„ ìƒ‰ì¸ ê°€ì´ë“œ</li>
                                <li class="mb-2 text-muted"><i class="fas fa-times me-2"></i> AI ì´íƒˆ ë°©ì§€ íŒì—…</li>
                                <li class="mb-2 text-muted"><i class="fas fa-times me-2"></i> ì‹¤ì‹œê°„ êµ¬ë§¤ ì•Œë¦¼ ìœ„ì ¯</li>
                            </ul>
                            <button class="btn btn-outline-dark btn-sm w-100 disabled">í˜„ì¬ ì‚¬ìš© ì¤‘</button>
                        </div>
                    </div>
                </div>
                <!-- Starter Plan -->
                <div class="col-xl-3 col-md-4">
                    <div class="card pricing-card featured h-100 p-3 shadow-sm border-primary">
                        <div class="recommended-badge">RECOMMENDED</div>
                        <div class="card-body text-center p-2 d-flex flex-column">
                            <h5 class="fw-bold">Starter</h5>
                            <div class="price-text my-3">â‚©99,000<span class="fs-6 text-muted">/ì›”</span></div>
                            <ul class="list-unstyled text-start mb-4 small flex-grow-1">
                                <li class="mb-2"><i class="fas fa-check text-success me-2"></i> SEO ì •ë°€ ë¶„ì„ (<b>ì¼ 30íšŒ</b>)</li>
                                <li class="mb-2"><i class="fas fa-check text-success me-2"></i> AI ì´íƒˆ ë°©ì§€ (ì›” 5,000íšŒ)</li>
                                <li class="mb-2"><i class="fas fa-check text-success me-2"></i> ì‹¤ì‹œê°„ êµ¬ë§¤ ì•Œë¦¼ ìœ„ì ¯</li>
                                <li class="mb-2"><i class="fas fa-check text-success me-2"></i> ê²€ìƒ‰ ì—”ì§„ ìƒ‰ì¸ í˜„í™© ëª¨ë‹ˆí„°ë§</li>
                            </ul>
                            <button class="btn btn-primary btn-sm w-100" onclick="alert('ê²°ì œ í˜ì´ì§€ë¡œ ì´ë™í•©ë‹ˆë‹¤.')">ì—…ê·¸ë ˆì´ë“œ</button>
                        </div>
                    </div>
                </div>
                <!-- Pro Plan -->
                <div class="col-xl-3 col-md-4">
                    <div class="card pricing-card h-100 p-3">
                        <div class="card-body text-center p-2 d-flex flex-column">
                            <h5 class="fw-bold">Pro</h5>
                            <div class="price-text my-3">â‚©190,000<span class="fs-6 text-muted">/ì›”</span></div>
                            <ul class="list-unstyled text-start mb-4 small flex-grow-1">
                                <li class="mb-2"><i class="fas fa-check text-success me-2"></i> SEO ì •ë°€ ë¶„ì„ (<b>ì¼ 50íšŒ</b>)</li>
                                <li class="mb-2"><i class="fas fa-check text-success me-2"></i> AI ì´íƒˆ ë°©ì§€ (ë¬´ì œí•œ í˜¸ì¶œ)</li>
                                <li class="mb-2"><i class="fas fa-check text-success me-2"></i> ì»¤ìŠ¤í…€ ë§ˆì¼€íŒ… ì‹œë‚˜ë¦¬ì˜¤ ì„¤ì •</li>
                                <li class="mb-2"><i class="fas fa-check text-success me-2"></i> ì£¼ê°„ AI ì„±ê³¼ ë¦¬í¬íŠ¸ (PDF)</li>
                            </ul>
                            <button class="btn btn-outline-primary btn-sm w-100" onclick="alert('ê²°ì œ í˜ì´ì§€ë¡œ ì´ë™í•©ë‹ˆë‹¤.')">ì—…ê·¸ë ˆì´ë“œ</button>
                        </div>
                    </div>
                </div>
                <!-- Custom Plan -->
                <div class="col-xl-3 col-md-4">
                    <div class="card pricing-card h-100 p-3 border-info">
                        <div class="card-body text-center p-2 d-flex flex-column">
                            <h5 class="fw-bold text-info">Custom</h5>
                            <div class="price-text my-3">ë³„ë„ ë¬¸ì˜</div>
                            <ul class="list-unstyled text-start mb-4 small flex-grow-1">
                                <li class="mb-2"><i class="fas fa-check text-info me-2"></i> ëŒ€í˜• ì‡¼í•‘ëª° ë§ì¶¤ ì†”ë£¨ì…˜</li>
                                <li class="mb-2"><i class="fas fa-check text-info me-2"></i> ì „ë‹´ ê³„ì • ê´€ë¦¬ì ë°°ì •</li>
                                <li class="mb-2"><i class="fas fa-check text-info me-2"></i> ì„œë²„ ë…ë¦½í˜• API ì œê³µ</li>
                                <li class="mb-2"><i class="fas fa-check text-info me-2"></i> 24/7 ì—”ì§€ë‹ˆì–´ë§ ì„œí¬íŠ¸</li>
                            </ul>
                            <a href="#customContactForm" class="btn btn-info btn-sm w-100 text-white">ë¬¸ì˜í•˜ê¸°</a>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Custom Plan Contact Form -->
            <div id="customContactForm" class="card mx-auto shadow-sm" style="max-width: 700px; border-top: 5px solid #0dcaf0;">
                <div class="card-body p-4">
                    <h5 class="fw-bold mb-4 text-center">Custom ìš”ê¸ˆì œ ë„ì… ë¬¸ì˜</h5>
                    <form onsubmit="event.preventDefault(); alert('ë¬¸ì˜ê°€ ì ‘ìˆ˜ë˜ì—ˆìŠµë‹ˆë‹¤. ë‹´ë‹¹ìê°€ ê³§ ì—°ë½ë“œë¦¬ê² ìŠµë‹ˆë‹¤.');">
                        <div class="row g-3">
                            <div class="col-md-6">
                                <label class="form-label small fw-bold">ì„±í•¨</label>
                                <input type="text" class="form-control" placeholder="í™ê¸¸ë™" required>
                            </div>
                            <div class="col-md-6">
                                <label class="form-label small fw-bold">ì—°ë½ì²˜</label>
                                <input type="tel" class="form-control" placeholder="010-1234-5678" required>
                            </div>
                            <div class="col-12">
                                <label class="form-label small fw-bold">ì´ë©”ì¼ ì£¼ì†Œ</label>
                                <input type="email" class="form-control" placeholder="example@company.com" required>
                            </div>
                            <div class="col-12">
                                <label class="form-label small fw-bold">ë¬¸ì˜ ë‚´ìš©</label>
                                <textarea class="form-control" rows="4" placeholder="ì‡¼í•‘ëª° ê·œëª¨, í•„ìš”í•œ ê¸°ëŠ¥ ë“± ë¬¸ì˜ ë‚´ìš©ì„ ì ì–´ì£¼ì„¸ìš”." required></textarea>
                            </div>
                            <div class="col-12 text-center mt-4">
                                <button type="submit" class="btn btn-info text-white px-5 py-2 fw-bold">ë¬¸ì˜ ë‚´ìš© ë³´ë‚´ê¸°</button>
                                <p class="text-muted small mt-2">ì˜ì—…ì¼ ê¸°ì¤€ 24ì‹œê°„ ì´ë‚´ì— ë‹µë³€ ë“œë¦½ë‹ˆë‹¤.</p>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>

        <!-- Section: My Organization -->
        <div id="sectionOrg" class="content-section hidden">
            <div class="card">
                <div class="card-body">
                    <h5 class="card-title">ë‚´ ì¡°ì§ê´€ë¦¬</h5>
                    
                    <div class="row align-items-end mb-4">
                        <div class="col-md-6">
                            <label class="form-label">í™œì„± ì¡°ì§ ì„ íƒ</label>
                            <select id="orgSelect" class="form-select">
                                <option value="" selected>ì¡°ì§ì„ ì„ íƒí•˜ì„¸ìš”...</option>
                            </select>
                        </div>
                        <div class="col-md-6">
                            <div class="input-group mt-3 mt-md-0">
                                <input type="text" id="newOrgName" class="form-control" placeholder="ìƒˆ ì¡°ì§ ì´ë¦„ (ì˜ˆ: ë¸Œë¼ì´íŠ¸ ìº”ë“¤)">
                                <button class="btn btn-outline-primary" onclick="createOrg()">+ ì‹ ê·œ ìƒì„±</button>
                            </div>
                        </div>
                    </div>
                    <div id="activeOrgStatus" class="mt-3 alert alert-info py-2 hidden">
                        í˜„ì¬ <strong id="activeOrgName"></strong> ì¡°ì§ì´ ì„ íƒë˜ì—ˆìŠµë‹ˆë‹¤.
                    </div>
                </div>
            </div>

            <!-- Installation Script -->
            <div id="orgScriptSection" class="card mt-4 hidden">
                <div class="card-body">
                    <h5 class="card-title fw-bold text-success"><i class="fas fa-code me-2"></i> SDK ì„¤ì¹˜ ìŠ¤í¬ë¦½íŠ¸</h5>
                    <p class="text-muted small">ì„ íƒí•œ ì¡°ì§ì˜ ì‚¬ì´íŠ¸ì—ì„œ AI ê¸°ëŠ¥ì„ í™œì„±í™”í•˜ë ¤ë©´ ì•„ë˜ ì½”ë“œë¥¼ &lt;head&gt; ì„¹ì…˜ì— ì‚½ì…í•˜ì„¸ìš”.</p>
                    <div id="orgScriptList">
                        <!-- Script items will be injected here -->
                    </div>
                </div>
            </div>

            <!-- Team Management -->
            <div class="card mt-4 border-primary">
                <div class="card-body">
                    <h5 class="card-title text-primary"><i class="fas fa-users me-2"></i> íŒ€ ê´€ë¦¬ ë° ì´ˆëŒ€</h5>
                    <p class="text-muted">í•¨ê»˜ ë¶„ì„ ë³´ê³ ì„œë¥¼ ê´€ë¦¬í•  íŒ€ì›ì„ ì´ˆëŒ€í•˜ì„¸ìš”.</p>
                    
                    <div class="row mb-4">
                        <div class="col-md-8">
                            <div class="input-group">
                                <input type="email" id="inviteEmail" class="form-control" placeholder="ì´ˆëŒ€í•  íŒ€ì› ì´ë©”ì¼ (ì˜ˆ: team@example.com)">
                                <select id="inviteRole" class="form-select" style="max-width: 150px;">
                                    <option value="member">ë©¤ë²„</option>
                                    <option value="admin">ê´€ë¦¬ì</option>
                                </select>
                                <button class="btn btn-primary" onclick="inviteMember()">ì´ˆëŒ€ ë©”ì¼ ë°œì†¡</button>
                            </div>
                        </div>
                    </div>

                    <h6 class="fw-bold mb-3">í˜„ì¬ íŒ€ì› ëª©ë¡</h6>
                    <div class="table-responsive">
                        <table class="table">
                            <thead>
                                <tr>
                                    <th>ì´ë¦„</th>
                                    <th>ì´ë©”ì¼</th>
                                    <th>ì—­í• </th>
                                    <th>í•©ë¥˜ì¼</th>
                                </tr>
                            </thead>
                            <tbody id="memberList">
                                <tr><td colspan="4" class="text-center py-3">ì¡°ì§ì„ ì„ íƒí•˜ë©´ íŒ€ì› ëª©ë¡ì´ í‘œì‹œë©ë‹ˆë‹¤.</td></tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Recycle Bin (Moved to bottom and made collapsible) -->
            <div class="card mt-4">
                <div class="card-body">
                    <div class="d-flex justify-content-between align-items-center cursor-pointer" onclick="toggleTrash()" style="cursor: pointer;">
                        <h5 class="card-title text-danger mb-0"><i class="fas fa-trash-alt me-2"></i> íœ´ì§€í†µ (ì‚­ì œëœ ë‚´ì—­)</h5>
                        <button class="btn btn-sm btn-outline-secondary" id="btnToggleTrash">ë” ë³´ê¸° <i class="fas fa-chevron-down ms-1"></i></button>
                    </div>
                    
                    <div id="trashContainer" class="hidden mt-3">
                        <p class="text-muted small">ì‚­ì œëœ ë¶„ì„ ë‚´ì—­ì„ í™•ì¸í•˜ê³  ë³µêµ¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
                        <div class="table-responsive">
                            <table class="table table-sm">
                                <thead>
                                    <tr>
                                        <th>ì‚¬ì´íŠ¸ URL</th>
                                        <th>ì‚­ì œ ì¼ì‹œ</th>
                                        <th>ì•¡ì…˜</th>
                                    </tr>
                                </thead>
                                <tbody id="trashList">
                                    <tr><td colspan="3" class="text-center py-3">íœ´ì§€í†µì´ ë¹„ì–´ ìˆìŠµë‹ˆë‹¤.</td></tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Section: Analysis Report (Scan) -->
        <div id="sectionReport" class="content-section hidden">
            <div class="card" id="step2Card">
                <div class="card-body">
                    <h5 class="card-title mb-4">ì‚¬ì´íŠ¸ ì—°ê²° ë° AI ìŠ¤ìº”</h5>
                    
                    <!-- Analysis Method Tabs -->
                    <ul class="nav nav-pills mb-3" id="scanTabs" role="tablist">
                        <li class="nav-item">
                            <button class="nav-link active" data-bs-toggle="pill" data-bs-target="#tabDirect" type="button">URL ì§ì ‘ ì…ë ¥</button>
                        </li>
                        <li class="nav-item">
                            <button class="nav-link" data-bs-toggle="pill" data-bs-target="#tabSitemap" type="button">Sitemap ë¶„ì„</button>
                        </li>
                    </ul>

                    <div class="tab-content mt-4">
                        <!-- Direct URL Tab -->
                        <div class="tab-pane fade show active" id="tabDirect">
                            <div class="input-group mb-3">
                                <span class="input-group-text">https://</span>
                                <input type="text" id="siteUrl" class="form-control" placeholder="www.example.com">
                                <button class="btn btn-primary px-4" onclick="registerSite()">
                                    <i class="fas fa-magic me-2"></i> AI ë¶„ì„ ì‹œì‘
                                </button>
                            </div>
                        </div>

                        <!-- Sitemap Tab -->
                        <div class="tab-pane fade" id="tabSitemap">
                            <div class="d-flex justify-content-between align-items-center mb-2">
                                <p class="text-muted small mb-0">ì‡¼í•‘ëª°ì˜ sitemap.xml ì£¼ì†Œë¥¼ ì…ë ¥í•˜ë©´ ëª¨ë“  í˜ì´ì§€ë¥¼ í•œ ë²ˆì— ë¶„ì„í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
                                <div class="badge bg-light text-dark border p-2">
                                    ë‚¨ì€ ë¶„ì„ íšŸìˆ˜: <span id="remainingCount" class="fw-bold text-primary">--</span> / 1000
                                </div>
                            </div>
                            <div class="input-group mb-3">
                                <span class="input-group-text">https://</span>
                                <input type="text" id="sitemapUrl" class="form-control" placeholder="www.example.com/sitemap.xml">
                                <button class="btn btn-success px-4" onclick="parseSitemap()">
                                    <i class="fas fa-list-ul me-2"></i> URL ì¶”ì¶œí•˜ê¸°
                                </button>
                            </div>
                            <div id="sitemapResult" class="mt-3 hidden">
                                <div class="d-flex justify-content-between align-items-center mb-2">
                                    <h6 class="mb-0">ì¶”ì¶œëœ URL (<span id="urlCount">0</span>ê°œ)</h6>
                                    <button class="btn btn-sm btn-outline-primary" onclick="batchAnalyzeSitemap()">ì„ íƒ í•­ëª© ì¼ê´„ ë¶„ì„</button>
                                </div>
                                <div class="list-group list-group-flush border rounded" id="sitemapUrlList" style="max-height: 200px; overflow-y: auto;">
                                    <!-- URLs will be injected here -->
                                </div>
                            </div>
                        </div>
                    </div>

                    <div id="scanLoader" class="loader">
                        <div class="spinner-border text-primary" role="status"></div>
                        <p class="mt-3"><strong>AIê°€ ì‚¬ì´íŠ¸ë¥¼ ë¶„ì„ ì¤‘ì…ë‹ˆë‹¤...</strong></p>
                    </div>
                </div>
            </div>

            <!-- New: Analysis History List -->
            <div class="card mb-4">
                <div class="card-body">
                    <div class="d-flex justify-content-between align-items-center mb-3">
                        <h5 class="card-title fw-bold mb-0">ìµœê·¼ ë¶„ì„ ë¦¬í¬íŠ¸ ëª©ë¡</h5>
                        <div class="input-group" style="max-width: 300px;">
                            <span class="input-group-text bg-white border-end-0"><i class="fas fa-search text-muted"></i></span>
                            <input type="text" id="historySearchInput" class="form-control border-start-0 shadow-none" placeholder="URL ê²€ìƒ‰..." onkeyup="filterHistoryTable()">
                        </div>
                    </div>
                    <div class="table-responsive">
                        <table class="table table-hover align-middle small">
                            <thead class="table-light">
                                <tr>
                                    <th onclick="sortHistory('url')" style="cursor: pointer;">ì‚¬ì´íŠ¸ URL <i class="fas fa-sort ms-1"></i></th>
                                    <th onclick="sortHistory('seo_score')" style="cursor: pointer;">SEO ì ìˆ˜ <i class="fas fa-sort ms-1"></i></th>
                                    <th onclick="sortHistory('created_at')" style="cursor: pointer;">ë§ˆì§€ë§‰ ìŠ¤ìº” ì¼ì‹œ <i class="fas fa-sort ms-1"></i></th>
                                </tr>
                            </thead>
                            <tbody id="reportHistoryList" style="cursor: pointer;">
                                <tr><td colspan="3" class="text-center py-3">ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</td></tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <div class="card hidden" id="step3Card">
                <div class="card-body">
                    <div class="d-flex justify-content-between align-items-center mb-4">
                        <button class="btn btn-sm btn-outline-secondary" onclick="navigateTo('/reports')">
                            <i class="fas fa-arrow-left me-1"></i> ëª©ë¡ìœ¼ë¡œ ëŒì•„ê°€ê¸°
                        </button>
                        <span class="badge bg-success">AI ë¶„ì„ ë¦¬í¬íŠ¸</span>
                    </div>

                    <div class="row mb-4">
                        <div class="col-md-12 mb-3">
                            <h4 class="fw-bold mb-1" id="analyzedUrlDisplay">https://www.example.com</h4>
                            <p class="text-muted small">ë¶„ì„ ëŒ€ìƒ URL</p>
                        </div>
                        <div class="col-md-4 text-center border-end">
                            <div class="text-muted mb-2">ì¢…í•© SEO ì ìˆ˜</div>
                            <div class="score-container">
                                <canvas id="scoreChart"></canvas>
                                <div class="score-text" id="seoScoreDisplay">--</div>
                            </div>
                        </div>
                        <div class="col-md-8">
                            <h6 class="fw-bold">AI ë¹„ì¦ˆë‹ˆìŠ¤ ìš”ì•½:</h6>
                            <p id="siteSummary" class="text-muted italic">--</p>
                            <h6 class="fw-bold mt-3">ğŸ” ì£¼ìš” ë°œê²¬ ìƒí’ˆ:</h6>
                            <div id="detectedProducts" class="d-flex flex-wrap gap-2 mb-3"></div>
                            <div id="ceoMessageContainer" class="alert alert-warning border-0 shadow-sm mt-3" style="display:none;">
                                <h6 class="fw-bold"><i class="fas fa-search-plus me-2 text-primary"></i> AI ë¶„ì„ ì˜ê²¬</h6>
                                <p id="ceoMessage" class="mb-0 italic" style="font-size: 0.95rem;"></p>
                            </div>
                        </div>
                    </div>

                    <div class="card mb-4 border-0 shadow-sm bg-light">
                        <div class="card-body">
                            <h6 class="fw-bold mb-3"><i class="fas fa-camera me-2"></i> ë¶„ì„ ì‹œì  ìŠ¤í¬ë¦°ìƒ·</h6>
                            <div class="text-center">
                                <img id="siteScreenshot" src="" class="img-fluid rounded border shadow-sm" style="max-height: 400px; display: none;" alt="Site Screenshot">
                                <div id="screenshotPlaceholder" class="py-5 text-muted bg-white rounded border">
                                    <i class="fas fa-image fa-3x mb-2"></i><br>ì´ë¯¸ì§€ ì¤€ë¹„ ì¤‘
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="card mt-4 border-0 shadow-sm" id="aiInsightCard" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white;">
                        <div class="card-body">
                            <h5 class="card-title text-white">AI ê²€ìƒ‰ ì—”ì§„(AIO) ë…¸ì¶œ ì§€ìˆ˜</h5>
                            <div class="row align-items-center">
                                <div class="col-md-3 text-center">
                                    <div style="font-size: 3rem; font-weight: bold;" id="aiScore">--</div>
                                </div>
                                <div class="col-md-9">
                                    <div class="row text-center">
                                        <div class="col-4"><i class="fas fa-comment-dots mb-1"></i><br><small id="chatgptStatus">--</small></div>
                                        <div class="col-4"><i class="fas fa-search mb-1"></i><br><small id="perplexityStatus">--</small></div>
                                        <div class="col-4"><i class="fas fa-star mb-1"></i><br><small id="geminiStatus">--</small></div>
                                    </div>
                                </div>
                            </div>
                            <div class="mt-3 p-2 bg-white bg-opacity-10 rounded">
                                <i class="fas fa-lightbulb me-2"></i> <span id="aiTip" style="font-size: 0.9rem;">--</span>
                            </div>
                        </div>
                    </div>
                    <hr>
                    <div class="row" id="adviceContainer">
                        <div class="col-md-6 advice-card"><div class="advice-title">ğŸ·ï¸ ë©”íƒ€ ì •ë³´</div><div class="advice-text" id="adviceMeta">--</div></div>
                        <div class="col-md-6 advice-card"><div class="advice-title">ğŸ—ï¸ ì‚¬ì´íŠ¸ êµ¬ì¡°</div><div class="advice-text" id="adviceSemantics">--</div></div>
                        <div class="col-md-6 advice-card"><div class="advice-title">ğŸ–¼ï¸ ì´ë¯¸ì§€ ìµœì í™”</div><div class="advice-text" id="adviceImages">--</div></div>
                        <div class="col-md-6 advice-card"><div class="advice-title">ğŸ”— ì—°ê²°ì„±</div><div class="advice-text" id="adviceLinks">--</div></div>
                        <div class="col-md-12 advice-card"><div class="advice-title">ğŸ’ êµ¬ì¡°í™” ë°ì´í„°</div><div class="advice-text" id="adviceSchemas">--</div></div>
                    </div>

                    <div class="alert alert-success mt-4">
                        <h6 class="fw-bold">ì—°ë™ ì½”ë“œ (ë¸Œë¼ì´íŠ¸ ë„¤íŠ¸ì›Œí¬ SDK)</h6>
                        <p class="small text-muted mb-2">ì´ ì½”ë“œë¥¼ ì‡¼í•‘ëª°ì˜ &lt;head&gt; ì„¹ì…˜ì— ë³µì‚¬í•´ ë„£ìœ¼ì„¸ìš”.</p>
                        <div class="code-block p-0">
                            <button class="copy-btn" onclick="copyText('scriptTagCode')">Copy</button>
                            <pre class="m-0"><code id="scriptTagCode" class="language-html"></code></pre>
                        </div>
                    </div>

                    <div id="sampleCodeContainer" class="mt-4" style="display:none;">
                        <h6 class="fw-bold text-primary"><i class="fas fa-code me-2"></i> ë§ì¶¤í˜• SEO/GEO ìµœì í™” ìƒ˜í”Œ ì½”ë“œ</h6>
                        <p class="small text-muted mb-3">ë¶„ì„ëœ ë‚´ìš©ì„ ë°”íƒ•ìœ¼ë¡œ ìƒì„±ëœ í˜ì´ì§€ ìµœì í™” ì˜ˆì‹œì…ë‹ˆë‹¤.</p>
                        
                        <div class="mb-3">
                            <label class="small fw-bold mb-1">SEO ìµœì í™” (JSON-LD / Meta)</label>
                            <div class="code-block p-0">
                                <button class="copy-btn" onclick="copyText('seoSampleCode')">Copy</button>
                                <pre class="m-0"><code id="seoSampleCode" class="language-html"></code></pre>
                            </div>
                        </div>

                        <div>
                            <label class="small fw-bold mb-1">GEO (AI ê²€ìƒ‰ ì—”ì§„ìš© ì‹œë§¨í‹± ë°ì´í„°)</label>
                            <div class="code-block p-0">
                                <button class="copy-btn" onclick="copyText('geoSampleCode')">Copy</button>
                                <pre class="m-0"><code id="geoSampleCode" class="language-html"></code></pre>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="/js/dashboard.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>